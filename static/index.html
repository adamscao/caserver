<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSH CA Server - Certificate Authority for SSH</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .github-link {
            position: absolute;
            top: 20px;
            left: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255,255,255,0.25);
            color: white;
            text-decoration: none;
            padding: 10px 18px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 15px;
            transition: all 0.3s;
            border: 2px solid rgba(255,255,255,0.3);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .github-link:hover {
            background: rgba(255,255,255,0.35);
            border-color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.2);
        }

        .github-icon {
            font-size: 24px;
        }

        .lang-switcher {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .lang-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.4);
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .lang-btn:hover, .lang-btn.active {
            background: rgba(255,255,255,0.3);
            border-color: white;
        }

        .content {
            padding: 40px 30px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section h2 {
            color: #667eea;
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .section h3 {
            color: #764ba2;
            font-size: 1.3em;
            margin: 20px 0 10px 0;
        }

        .section p, .section li {
            margin-bottom: 12px;
            color: #555;
        }

        .section ul {
            margin-left: 20px;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
        }

        .code-block code {
            color: #f8f8f2;
        }

        .highlight {
            background: #fff3cd;
            padding: 15px;
            border-left: 4px solid #ffc107;
            border-radius: 4px;
            margin: 15px 0;
        }

        .api-list {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .api-item {
            margin-bottom: 15px;
            padding: 10px;
            background: white;
            border-radius: 6px;
            border-left: 4px solid #667eea;
        }

        .api-method {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 12px;
            margin-right: 10px;
        }

        .method-get {
            background: #28a745;
            color: white;
        }

        .method-post {
            background: #007bff;
            color: white;
        }

        .footer {
            background: #f8f9fa;
            padding: 20px 30px;
            text-align: center;
            color: #666;
            font-size: 14px;
        }

        .lang-content {
            display: none;
        }

        .lang-content.active {
            display: block;
        }

        .status-badge {
            display: inline-block;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            margin-left: 10px;
            font-weight: 600;
            transition: all 0.3s;
            position: relative;
        }

        .status-badge.online {
            background: #28a745;
            box-shadow: 0 0 12px rgba(40, 167, 69, 0.5);
        }

        .status-badge.offline {
            background: #dc3545;
            box-shadow: 0 0 12px rgba(220, 53, 69, 0.5);
        }

        .status-badge.checking {
            background: #ffc107;
            box-shadow: 0 0 12px rgba(255, 193, 7, 0.5);
        }

        .status-badge::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 50%;
            transform: translateY(-50%);
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: white;
        }

        .status-badge.online::before {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .lang-switcher {
                position: static;
                justify-content: center;
                margin-bottom: 20px;
            }

            .content {
                padding: 20px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <a href="https://github.com/adamscao/caserver" target="_blank" class="github-link">
                <span class="github-icon">âš¡</span>
                <span>GitHub</span>
            </a>
            <div class="lang-switcher">
                <button class="lang-btn active" onclick="switchLang('en')">English</button>
                <button class="lang-btn" onclick="switchLang('zh')">ä¸­æ–‡</button>
            </div>
            <h1>ğŸ” SSH CA Server</h1>
            <p class="lang-content active" data-lang="en">Centralized SSH Certificate Authority Service</p>
            <p class="lang-content" data-lang="zh">é›†ä¸­å¼SSHè¯ä¹¦é¢å‘æœåŠ¡</p>
            <span class="status-badge checking" id="status-badge">Checking...</span>
        </div>

        <!-- English Content -->
        <div class="content lang-content active" data-lang="en">
            <div class="section">
                <h2>ğŸ“– What is SSH CA Server?</h2>
                <p>SSH CA Server is a centralized certificate authority for managing SSH access across multiple servers. Instead of distributing public keys manually to each server, you can issue short-lived SSH certificates that are automatically trusted by all configured servers.</p>

                <h3>Key Features</h3>
                <ul>
                    <li>ğŸ”’ <strong>Two-Factor Authentication</strong> - Password + TOTP for certificate issuance</li>
                    <li>â° <strong>Short-lived Certificates</strong> - 24-hour validity period (configurable)</li>
                    <li>ğŸ”„ <strong>Automatic Renewal</strong> - Renew tokens for unattended certificate renewal</li>
                    <li>ğŸ“Š <strong>Audit Logging</strong> - Complete audit trail of all certificate operations</li>
                    <li>ğŸš€ <strong>Easy Deployment</strong> - One-command setup for servers and clients</li>
                </ul>
            </div>

            <div class="section">
                <h2>ğŸš€ Quick Start</h2>

                <h3>For Servers (Trust CA)</h3>
                <p>Run this command on any SSH server to configure it to trust certificates from this CA:</p>
                <div class="code-block"><code>curl -fsSL https://ca.smartcubes.uk/v1/bootstrap/server.sh | sudo bash</code></div>
                <p>This will:</p>
                <ul>
                    <li>Download the CA public key</li>
                    <li>Configure sshd to trust CA-signed certificates</li>
                    <li>Register the server with the CA for audit purposes</li>
                </ul>

                <h3>For Clients (Get Certificate)</h3>
                <p>Run this command on your client machine to obtain an SSH certificate:</p>
                <div class="code-block"><code>curl -fsSL https://ca.smartcubes.uk/v1/bootstrap/client.sh | bash</code></div>
                <p>You will be prompted for:</p>
                <ul>
                    <li>Username</li>
                    <li>Password</li>
                    <li>TOTP code (from your authenticator app)</li>
                </ul>
                <p>After successful authentication, you'll receive:</p>
                <ul>
                    <li>SSH certificate (valid for 24 hours)</li>
                    <li>Renewal token (valid for 90 days)</li>
                    <li>Auto-configured SSH client settings</li>
                </ul>

                <h3>Using Your Certificate</h3>
                <p>Once configured, simply SSH to any server that trusts this CA:</p>
                <div class="code-block"><code>ssh username@server.example.com</code></div>
                <p>Your SSH client will automatically use the CA certificate for authentication.</p>
            </div>

            <div class="section">
                <h2>ğŸ”Œ API Reference</h2>

                <div class="api-list">
                    <div class="api-item">
                        <span class="api-method method-get">GET</span>
                        <strong>/v1/ca/user</strong>
                        <p>Download the CA public key</p>
                    </div>

                    <div class="api-item">
                        <span class="api-method method-get">GET</span>
                        <strong>/v1/bootstrap/server.sh</strong>
                        <p>Get server bootstrap script</p>
                    </div>

                    <div class="api-item">
                        <span class="api-method method-get">GET</span>
                        <strong>/v1/bootstrap/client.sh</strong>
                        <p>Get client bootstrap script</p>
                    </div>

                    <div class="api-item">
                        <span class="api-method method-post">POST</span>
                        <strong>/v1/certs/issue</strong>
                        <p>Issue new certificate (requires username + password + TOTP)</p>
                    </div>

                    <div class="api-item">
                        <span class="api-method method-post">POST</span>
                        <strong>/v1/certs/renew</strong>
                        <p>Renew existing certificate (requires renewal token)</p>
                    </div>

                    <div class="api-item">
                        <span class="api-method method-post">POST</span>
                        <strong>/v1/register/server</strong>
                        <p>Register a server (called automatically by bootstrap script)</p>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>ğŸ’¡ Manual Certificate Issuance</h2>
                <p>If you prefer to use the API directly:</p>

                <h3>Step 1: Generate SSH Key</h3>
                <div class="code-block"><code>ssh-keygen -t ed25519 -f ~/.ssh/id_ed25519_ca -C "user@client"</code></div>

                <h3>Step 2: Request Certificate</h3>
                <div class="code-block"><code>curl -X POST https://ca.smartcubes.uk/v1/certs/issue \
  -H "Content-Type: application/json" \
  -d '{
    "username": "your-username",
    "password": "your-password",
    "totp": "123456",
    "public_key": "ssh-ed25519 AAAA...",
    "client_hostname": "laptop",
    "requested_principals": ["your-username"],
    "requested_validity": "24h"
  }' | jq -r '.certificate' > ~/.ssh/id_ed25519_ca-cert.pub</code></div>
            </div>

            <div class="section">
                <h2>ğŸ‘¥ User Management (Administrators)</h2>
                <p>New users must be created by administrators using one of the following methods:</p>

                <h3>Method 1: Admin CLI Tool (Recommended)</h3>
                <p>Use the built-in command-line tool:</p>
                <div class="code-block"><code>./bin/admin -c config.yaml user create \
  --username "john" \
  --password "SecurePass123" \
  --generate-totp \
  --max-certs-per-day 50</code></div>

                <p>The CLI will output the TOTP secret and QR code URL for the user to set up their authenticator app.</p>

                <h3>Method 2: HTTP API</h3>
                <p>Create users programmatically via the admin API:</p>
                <div class="code-block"><code>curl -X POST https://ca.smartcubes.uk/v1/admin/users \
  -H "Content-Type: application/json" \
  -H "X-Admin-Token: YOUR_ADMIN_TOKEN" \
  -d '{
    "username": "john",
    "password": "SecurePass123",
    "totp_secret": "BASE32_ENCODED_SECRET",
    "enabled": true,
    "max_certs_per_day": 50
  }'</code></div>

                <div class="highlight">
                    <strong>âš ï¸ Security Note:</strong> Admin tokens are configured in the server's config.yaml file and should be kept secret. Contact your system administrator for access.
                </div>

                <h3>List Users</h3>
                <div class="code-block"><code>./bin/admin -c config.yaml user list</code></div>
            </div>

            <div class="section">
                <h2>ğŸ” Security</h2>
                <ul>
                    <li>All communication over HTTPS (TLS 1.3)</li>
                    <li>Two-factor authentication (TOTP) required for certificate issuance</li>
                    <li>Short-lived certificates (24-hour default validity)</li>
                    <li>Renewal tokens are bound to specific public keys</li>
                    <li>Complete audit logging of all certificate operations</li>
                    <li>Rate limiting to prevent abuse</li>
                </ul>
            </div>

            <div class="section">
                <h2>ğŸ“š Documentation</h2>
                <p>For administrators and developers:</p>
                <ul>
                    <li>Complete requirements and design documentation available in the repository</li>
                    <li>Database schema and audit log structure documented</li>
                    <li>API reference with examples</li>
                    <li>Deployment and configuration guides</li>
                </ul>
            </div>
        </div>

        <!-- Chinese Content -->
        <div class="content lang-content" data-lang="zh">
            <div class="section">
                <h2>ğŸ“– ä»€ä¹ˆæ˜¯ SSH CA Serverï¼Ÿ</h2>
                <p>SSH CA Server æ˜¯ä¸€ä¸ªé›†ä¸­å¼çš„SSHè¯ä¹¦é¢å‘æœºæ„ï¼Œç”¨äºç®¡ç†å¤šå°æœåŠ¡å™¨çš„SSHè®¿é—®ã€‚æ— éœ€åœ¨æ¯å°æœåŠ¡å™¨ä¸Šæ‰‹åŠ¨åˆ†å‘å…¬é’¥ï¼Œæ‚¨å¯ä»¥ç­¾å‘çŸ­æœŸæœ‰æ•ˆçš„SSHè¯ä¹¦ï¼Œè¿™äº›è¯ä¹¦ä¼šè¢«æ‰€æœ‰å·²é…ç½®çš„æœåŠ¡å™¨è‡ªåŠ¨ä¿¡ä»»ã€‚</p>

                <h3>æ ¸å¿ƒç‰¹æ€§</h3>
                <ul>
                    <li>ğŸ”’ <strong>åŒå› ç´ è®¤è¯</strong> - å¯†ç  + TOTP ç”¨äºè¯ä¹¦ç­¾å‘</li>
                    <li>â° <strong>çŸ­æœŸè¯ä¹¦</strong> - 24å°æ—¶æœ‰æ•ˆæœŸï¼ˆå¯é…ç½®ï¼‰</li>
                    <li>ğŸ”„ <strong>è‡ªåŠ¨ç»­ç­¾</strong> - ç»­ç­¾ä»¤ç‰Œæ”¯æŒæ— äººå€¼å®ˆè‡ªåŠ¨ç»­è®¢</li>
                    <li>ğŸ“Š <strong>å®¡è®¡æ—¥å¿—</strong> - å®Œæ•´çš„è¯ä¹¦æ“ä½œå®¡è®¡è¿½è¸ª</li>
                    <li>ğŸš€ <strong>æ˜“äºéƒ¨ç½²</strong> - æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¸€é”®é…ç½®</li>
                </ul>
            </div>

            <div class="section">
                <h2>ğŸš€ å¿«é€Ÿå¼€å§‹</h2>

                <h3>æœåŠ¡å™¨ç«¯ï¼ˆä¿¡ä»»CAï¼‰</h3>
                <p>åœ¨ä»»ä½•SSHæœåŠ¡å™¨ä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œé…ç½®å…¶ä¿¡ä»»æ­¤CAç­¾å‘çš„è¯ä¹¦ï¼š</p>
                <div class="code-block"><code>curl -fsSL https://ca.smartcubes.uk/v1/bootstrap/server.sh | sudo bash</code></div>
                <p>æ­¤è„šæœ¬å°†ï¼š</p>
                <ul>
                    <li>ä¸‹è½½CAå…¬é’¥</li>
                    <li>é…ç½®sshdä¿¡ä»»CAç­¾åçš„è¯ä¹¦</li>
                    <li>å‘CAæ³¨å†ŒæœåŠ¡å™¨ä¿¡æ¯ï¼ˆç”¨äºå®¡è®¡ï¼‰</li>
                </ul>

                <h3>å®¢æˆ·ç«¯ï¼ˆè·å–è¯ä¹¦ï¼‰</h3>
                <p>åœ¨æ‚¨çš„å®¢æˆ·ç«¯æœºå™¨ä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤è·å–SSHè¯ä¹¦ï¼š</p>
                <div class="code-block"><code>curl -fsSL https://ca.smartcubes.uk/v1/bootstrap/client.sh | bash</code></div>
                <p>æ‚¨éœ€è¦è¾“å…¥ï¼š</p>
                <ul>
                    <li>ç”¨æˆ·å</li>
                    <li>å¯†ç </li>
                    <li>TOTPéªŒè¯ç ï¼ˆæ¥è‡ªæ‚¨çš„èº«ä»½éªŒè¯å™¨åº”ç”¨ï¼‰</li>
                </ul>
                <p>è®¤è¯æˆåŠŸåï¼Œæ‚¨å°†è·å¾—ï¼š</p>
                <ul>
                    <li>SSHè¯ä¹¦ï¼ˆæœ‰æ•ˆæœŸ24å°æ—¶ï¼‰</li>
                    <li>ç»­ç­¾ä»¤ç‰Œï¼ˆæœ‰æ•ˆæœŸ90å¤©ï¼‰</li>
                    <li>è‡ªåŠ¨é…ç½®çš„SSHå®¢æˆ·ç«¯è®¾ç½®</li>
                </ul>

                <h3>ä½¿ç”¨è¯ä¹¦</h3>
                <p>é…ç½®å®Œæˆåï¼Œç›´æ¥SSHåˆ°ä»»ä½•ä¿¡ä»»æ­¤CAçš„æœåŠ¡å™¨ï¼š</p>
                <div class="code-block"><code>ssh username@server.example.com</code></div>
                <p>æ‚¨çš„SSHå®¢æˆ·ç«¯å°†è‡ªåŠ¨ä½¿ç”¨CAè¯ä¹¦è¿›è¡Œèº«ä»½éªŒè¯ã€‚</p>
            </div>

            <div class="section">
                <h2>ğŸ”Œ API å‚è€ƒ</h2>

                <div class="api-list">
                    <div class="api-item">
                        <span class="api-method method-get">GET</span>
                        <strong>/v1/ca/user</strong>
                        <p>ä¸‹è½½CAå…¬é’¥</p>
                    </div>

                    <div class="api-item">
                        <span class="api-method method-get">GET</span>
                        <strong>/v1/bootstrap/server.sh</strong>
                        <p>è·å–æœåŠ¡å™¨å¼•å¯¼è„šæœ¬</p>
                    </div>

                    <div class="api-item">
                        <span class="api-method method-get">GET</span>
                        <strong>/v1/bootstrap/client.sh</strong>
                        <p>è·å–å®¢æˆ·ç«¯å¼•å¯¼è„šæœ¬</p>
                    </div>

                    <div class="api-item">
                        <span class="api-method method-post">POST</span>
                        <strong>/v1/certs/issue</strong>
                        <p>ç­¾å‘æ–°è¯ä¹¦ï¼ˆéœ€è¦ç”¨æˆ·å + å¯†ç  + TOTPï¼‰</p>
                    </div>

                    <div class="api-item">
                        <span class="api-method method-post">POST</span>
                        <strong>/v1/certs/renew</strong>
                        <p>ç»­ç­¾ç°æœ‰è¯ä¹¦ï¼ˆéœ€è¦ç»­ç­¾ä»¤ç‰Œï¼‰</p>
                    </div>

                    <div class="api-item">
                        <span class="api-method method-post">POST</span>
                        <strong>/v1/register/server</strong>
                        <p>æ³¨å†ŒæœåŠ¡å™¨ï¼ˆç”±å¼•å¯¼è„šæœ¬è‡ªåŠ¨è°ƒç”¨ï¼‰</p>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>ğŸ’¡ æ‰‹åŠ¨ç­¾å‘è¯ä¹¦</h2>
                <p>å¦‚æœæ‚¨å¸Œæœ›ç›´æ¥ä½¿ç”¨APIï¼š</p>

                <h3>æ­¥éª¤1ï¼šç”ŸæˆSSHå¯†é’¥</h3>
                <div class="code-block"><code>ssh-keygen -t ed25519 -f ~/.ssh/id_ed25519_ca -C "user@client"</code></div>

                <h3>æ­¥éª¤2ï¼šè¯·æ±‚è¯ä¹¦</h3>
                <div class="code-block"><code>curl -X POST https://ca.smartcubes.uk/v1/certs/issue \
  -H "Content-Type: application/json" \
  -d '{
    "username": "your-username",
    "password": "your-password",
    "totp": "123456",
    "public_key": "ssh-ed25519 AAAA...",
    "client_hostname": "laptop",
    "requested_principals": ["your-username"],
    "requested_validity": "24h"
  }' | jq -r '.certificate' > ~/.ssh/id_ed25519_ca-cert.pub</code></div>
            </div>

            <div class="section">
                <h2>ğŸ‘¥ ç”¨æˆ·ç®¡ç†ï¼ˆç®¡ç†å‘˜ï¼‰</h2>
                <p>æ–°ç”¨æˆ·å¿…é¡»ç”±ç®¡ç†å‘˜ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä¹‹ä¸€åˆ›å»ºï¼š</p>

                <h3>æ–¹æ³•1ï¼šAdmin CLIå·¥å…·ï¼ˆæ¨èï¼‰</h3>
                <p>ä½¿ç”¨å†…ç½®çš„å‘½ä»¤è¡Œå·¥å…·ï¼š</p>
                <div class="code-block"><code>./bin/admin -c config.yaml user create \
  --username "john" \
  --password "SecurePass123" \
  --generate-totp \
  --max-certs-per-day 50</code></div>

                <p>CLIå·¥å…·ä¼šè¾“å‡ºTOTPå¯†é’¥å’ŒäºŒç»´ç URLï¼Œä¾›ç”¨æˆ·è®¾ç½®èº«ä»½éªŒè¯å™¨åº”ç”¨ã€‚</p>

                <h3>æ–¹æ³•2ï¼šHTTP API</h3>
                <p>é€šè¿‡ç®¡ç†å‘˜APIç¼–ç¨‹æ–¹å¼åˆ›å»ºç”¨æˆ·ï¼š</p>
                <div class="code-block"><code>curl -X POST https://ca.smartcubes.uk/v1/admin/users \
  -H "Content-Type: application/json" \
  -H "X-Admin-Token: YOUR_ADMIN_TOKEN" \
  -d '{
    "username": "john",
    "password": "SecurePass123",
    "totp_secret": "BASE32_ENCODED_SECRET",
    "enabled": true,
    "max_certs_per_day": 50
  }'</code></div>

                <div class="highlight">
                    <strong>âš ï¸ å®‰å…¨æç¤ºï¼š</strong> Adminä»¤ç‰Œåœ¨æœåŠ¡å™¨çš„config.yamlæ–‡ä»¶ä¸­é…ç½®ï¼Œåº”å½“ä¿å¯†ã€‚å¦‚éœ€è®¿é—®æƒé™ï¼Œè¯·è”ç³»ç³»ç»Ÿç®¡ç†å‘˜ã€‚
                </div>

                <h3>åˆ—å‡ºç”¨æˆ·</h3>
                <div class="code-block"><code>./bin/admin -c config.yaml user list</code></div>
            </div>

            <div class="section">
                <h2>ğŸ” å®‰å…¨æ€§</h2>
                <ul>
                    <li>æ‰€æœ‰é€šä¿¡é€šè¿‡HTTPSåŠ å¯†ï¼ˆTLS 1.3ï¼‰</li>
                    <li>è¯ä¹¦ç­¾å‘éœ€è¦åŒå› ç´ è®¤è¯ï¼ˆTOTPï¼‰</li>
                    <li>çŸ­æœŸè¯ä¹¦ï¼ˆé»˜è®¤24å°æ—¶æœ‰æ•ˆæœŸï¼‰</li>
                    <li>ç»­ç­¾ä»¤ç‰Œä¸ç‰¹å®šå…¬é’¥ç»‘å®š</li>
                    <li>å®Œæ•´çš„è¯ä¹¦æ“ä½œå®¡è®¡æ—¥å¿—</li>
                    <li>é€Ÿç‡é™åˆ¶é˜²æ­¢æ»¥ç”¨</li>
                </ul>
            </div>

            <div class="section">
                <h2>ğŸ“š æ–‡æ¡£</h2>
                <p>é¢å‘ç®¡ç†å‘˜å’Œå¼€å‘è€…ï¼š</p>
                <ul>
                    <li>ä»£ç ä»“åº“ä¸­æä¾›å®Œæ•´çš„éœ€æ±‚å’Œè®¾è®¡æ–‡æ¡£</li>
                    <li>æ•°æ®åº“schemaå’Œå®¡è®¡æ—¥å¿—ç»“æ„æ–‡æ¡£</li>
                    <li>APIå‚è€ƒå’Œç¤ºä¾‹</li>
                    <li>éƒ¨ç½²å’Œé…ç½®æŒ‡å—</li>
                </ul>
            </div>
        </div>

        <div class="footer">
            <p>&copy; 2025 SSH CA Server | Powered by Go + Gin | Secured by Let's Encrypt</p>
            <p>
                <a href="https://github.com/adamscao/caserver" target="_blank" style="color: #667eea; text-decoration: none;">
                    <strong>ğŸ“¦ GitHub Repository</strong>
                </a> |
                Status: <a href="/health" style="color: #28a745; text-decoration: none;">Health Check</a> |
                CA Public Key: <a href="/v1/ca/user" style="color: #667eea; text-decoration: none;">Download</a>
            </p>
        </div>
    </div>

    <script>
        function switchLang(lang) {
            // Update active button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update content
            document.querySelectorAll('.lang-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll(`[data-lang="${lang}"]`).forEach(content => {
                content.classList.add('active');
            });

            // Update HTML lang attribute
            document.documentElement.lang = lang;
        }

        // Health check for status badge
        async function checkHealth() {
            const badge = document.getElementById('status-badge');
            badge.className = 'status-badge checking';
            badge.textContent = 'Checking...';

            try {
                const response = await fetch('/health', {
                    method: 'GET',
                    cache: 'no-cache'
                });

                if (response.ok) {
                    const data = await response.json();
                    if (data.status === 'ok') {
                        badge.className = 'status-badge online';
                        badge.textContent = 'Online';
                    } else {
                        badge.className = 'status-badge offline';
                        badge.textContent = 'Offline';
                    }
                } else {
                    badge.className = 'status-badge offline';
                    badge.textContent = 'Offline';
                }
            } catch (error) {
                console.error('Health check failed:', error);
                badge.className = 'status-badge offline';
                badge.textContent = 'Offline';
            }
        }

        // Check health on page load
        checkHealth();

        // Check periodically every 30 seconds
        setInterval(checkHealth, 30000);
    </script>
</body>
</html>
